<!DOCTYPE HTML>
<html>
	<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Trap Reciever</title>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

    <script type="text/javascript" src="js/jq.js"></script>
	<script type="text/javascript" src="js/sb-1.4.1.js"></script>
    <script type="text/javascript">

		$(window).on("load", setup);

		var sb
			, app_name = "Playground of FUN"
			;

		function setup (){

            /* Connection declarations */
			app_name = app_name

			sb = new Spacebrew.Client({reconnect:true});

			sb.name(app_name);
			sb.description("This recieves traps and such in our playground.");

            /* Dynamically creates publishers */

			sb.addSubscribe( "playgroundReciever", "string" );

			sb.onStringMessage = onStringMessage;

			sb.connect();

            /* Listeners */
			$(".button").on("mousedown", function(e){
    			var target = $(this).attr('id');
    			sb.send(target, "string", target);
			});

			$(".button").on("mouseup", function(e){
                var target = $(this).attr('id');
    			sb.send(target, "string", "");
			});
		}

        /* Reciever Call */
		function onStringMessage( name, value ){
    		if(name == "playgroundReciever" && value != "") {
        		var parsedValue = value.replace("section", "");
        		var section = parsedValue.charAt(0);
        		var video = parsedValue.charAt(1);

        		console.log(section);
        		console.log(video);

        		document.getElementById('videoA').pause();
                $("#videoA").html('<source src="'+ section + video + '.mp4" type="video/mp4"></source>' );
                document.getElementById('videoA').load();
                document.getElementById('videoA').play();

                setTimeout(function(){
                    $("#videoA").html('' );
                    document.getElementById('videoA').load();
                }, 10000);

    		}

		}

	</script>

	</head>

	<body>

    	<video id="videoA" width="1920" height="1080" loop="loop">
        </video>

        <style>
            #videoA {
                position: absolute;
                top: 0px;
                left: 0px;
                width: 1920px;
                height: 1080px;
            }
        </style>

	</body>

</html>